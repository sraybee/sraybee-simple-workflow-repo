name: test-action
description: Test action for workflow automation
inputs:
  input1:
    description: input 1

outputs:
  output1:
    description: output 1
    value: ${{ startsWith(fromJSON(steps.genjson.outputs.json)['key'], 'prefix') }}

runs:
  using: composite
  steps:
    - id: genjson
      name: Run action-internal step generating JSON
      uses: docker://alpine:3.22
      run: |
        if [ "${{ inputs.input1 }}" = true ]; then
          echo '{"key": "prefix suffix"}' > $CLOUDBEES_OUTPUTS/json
        else
          echo '{"key": 3}' > $CLOUDBEES_OUTPUTS/json
        fi
